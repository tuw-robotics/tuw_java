# tuw_java
*ROS to java examples*

This small tutorial shows you how to create a new rosjava project with dependencies to other C++ ROS msg packages.

## Directory structure

Move to your workspaces src folder and create a new rosjava package.

```bash
mkdir my_workspace/src
cd my_workspace/src
mkdir rosjava_catkin_package
catkin_create_rosjava_pkg rosjava_catkin_package
cd rosjava_catkin_package
catkin_create_rosjava_project tuw_msgs_java_interface
```

Within the created project folder *tuw_msgs_java_interface* you must place your java application, explained later.

```bash
cd ../..
catkin_make
source devel/setup.bash
cd src/rosjava_catkin_package/tuw_msgs_java_interface/
cd src/main/java/
```

From here cd all the way down to the last directory. The path is autogenerated by catkin, you should not change it except you know what you are doing.
In this project the path is:

```bash
cd main/java/com/github/rosjava_catkin_package/tuw_msgs_java_interface/
touch SomeClass.java
```

Once the project has been created you also find 2 java files implementing the talker and listener example, you can delete them.
The dependencies to other ros projects can be specified in *rosjava_catkin_package/package.xml*

In order to inform java of the dependency (headers must be generated in java) the gradle.build script in tuw_msgs_java_interface must be edited. Compilation of other rosjava packages can also be triggered here.
```gradle
dependencies {
   compile 'org.ros.rosjava_core:rosjava:[0.3,0.4)'
   compile 'org.ros.rosjava_messages:tuw_multi_robot_msgs:0.0+'
}
```
Additionally, a jar file version string must be specified since gradle generates a jar file during compilation and starts a node that loads the jar. This is similar to nodelets. Furthermore, a run argument can be specified that points to the impelmentation of a simple message listener in this example.

```gradle
version = '0.1.0'

run {
    args = [ 'tuw_msgs_java_interface.SomeClass' ]
}
```

Now cd back to rosjava_catkin_package folder. If you want a specific java version to be used (in this case 8) add the following in the *rosjava_catkin_package/gradle.build* script. Furthermore, IDE support can be added.

```gradle
subprojects {
    apply plugin: "ros-java"

    sourceCompatibility=8
    targetCompatibility=8

    /*
     * IDE support.
     */
    apply plugin: "idea"
}
```

The project can then be built with catkin_make or call ./gradlew build in the rosjava_catkin_package. ./gradlew run starts the ros node.
